<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Find the Ball – BrainTrials</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    background: #111;
    color: white;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    overflow: hidden;
  }

  #game {
    position: relative;
    width: 100%;
    height: 80%;
    border: 2px solid #444;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }

  .ball {
    position: absolute;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: white;
    cursor: pointer;
    transition: opacity 0.3s ease;
  }

  .ball.real {
    background: gold; /* optional: erkenne richtigen Ball */
  }

  .ball.fake {
    background: white;
    opacity: 0.6;
  }

  #wordFlash {
    position: absolute;
    top: 10px;
    font-size: 32px;
    font-weight: bold;
    color: #0f0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  #writeOverlay {
    position: absolute;
    bottom: 20px;
    width: 90%;
    height: 50px;
    border: 2px solid #0f0;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    color: #0f0;
  }
</style>
</head>
<body>

<h2>Find the Ball – Level <span id="level">1</span></h2>
<div id="game">
  <div id="wordFlash"></div>
  <div id="writeOverlay">Schreibe hier das Wort...</div>
</div>

<script>
const game = document.getElementById("game");
const flash = document.getElementById("wordFlash");
const writeOverlay = document.getElementById("writeOverlay");
const levelSpan = document.getElementById("level");

const WORDS = ["mind","brain","ball","focus","game"]; // Beispielwörter
let level = 0;
let realBall;
let inputWord = "";

function randomPosition(maxX,maxY){
  return {x: Math.random()*maxX, y: Math.random()*maxY};
}

/* Spawn Bälle */
function spawnBalls(){
  const gameRect = game.getBoundingClientRect();

  // Richtig
  realBall = document.createElement("div");
  realBall.className = "ball real";
  const pos = randomPosition(gameRect.width-50, gameRect.height-50);
  realBall.style.left = pos.x + "px";
  realBall.style.top = pos.y + "px";
  game.appendChild(realBall);
  realBall.onclick = hitBall;

  // Fake-Bälle
  for(let i=0;i<6;i++){
    const f = document.createElement("div");
    f.className = "ball fake";
    const p = randomPosition(gameRect.width-50, gameRect.height-50);
    f.style.left = p.x + "px";
    f.style.top = p.y + "px";
    game.appendChild(f);
  }

  setTimeout(()=>hideBalls(), 1200);
}

/* Ball sichtbar -> unsichtbar */
function hideBalls(){
  document.querySelectorAll(".ball").forEach(b=>b.style.opacity=0);
}

/* Richtiger Ball geklickt */
function hitBall(){
  const word = WORDS[level % WORDS.length];
  flash.textContent = word;
  flash.style.opacity = 1;

  // Zeige Schreib-Overlay
  inputWord = "";
  writeOverlay.textContent = "";

  // Timeout nach 2 Sek. blendet Wort aus
  setTimeout(()=>{flash.style.opacity=0;}, 2000);
}

/* Keypress für Schreiben */
document.addEventListener("keydown",(e)=>{
  if(!flash.textContent) return; // nur wenn Wort aktiv
  if(e.key==="Backspace"){
    inputWord = inputWord.slice(0,-1);
  } else if(e.key.length===1){
    inputWord += e.key;
  } else if(e.key==="Enter"){
    checkWord();
  }
  writeOverlay.textContent = inputWord;
});

/* Prüfen des Wortes */
function checkWord(){
  const word = WORDS[level % WORDS.length];
  if(inputWord.toLowerCase() === word.toLowerCase()){
    level++;
    levelSpan.textContent = level+1;
    resetRound();
  } else {
    alert("Falsches Wort! Versuch nochmal.");
    inputWord = "";
    writeOverlay.textContent = "";
  }
}

/* Neue Runde */
function resetRound(){
  document.querySelectorAll(".ball").forEach(b=>b.remove());
  spawnBalls();
}

/* Start */
spawnBalls();
</script>

</body>
</html>
