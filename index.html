<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Trop Adventure</title>
<style>
body { margin:0; overflow:hidden; background:#6ec6ff; }
canvas { display:block; }

.button{
position:fixed;
bottom:20px;
width:60px;
height:60px;
background:rgba(0,0,0,0.4);
color:white;
font-size:30px;
text-align:center;
line-height:60px;
border-radius:50%;
user-select:none;
}
#left{ left:20px; }
#right{ left:100px; }
#jump{ right:40px; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="left" class="button">◀</div>
<div id="right" class="button">▶</div>
<div id="jump" class="button">▲</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let gravity = 0.7;
let keys = {left:false,right:false,jump:false};

let player = {
x:100,
y:300,
w:30,
h:30,
dx:0,
dy:0,
grounded:false
};

let ground = {x:0,y:400,w:canvas.width,h:50};
let spike = {x:600,y:380,size:20};

function drawBackground(){
ctx.fillStyle="#6ec6ff";
ctx.fillRect(0,0,canvas.width,canvas.height);

ctx.fillStyle="yellow";
ctx.beginPath();
ctx.arc(100,100,50,0,Math.PI*2);
ctx.fill();
}

function drawGround(){
ctx.fillStyle="#228B22";
ctx.fillRect(ground.x,ground.y,ground.w,ground.h);
}

function drawSpike(){
ctx.fillStyle="red";
ctx.beginPath();
ctx.moveTo(spike.x,spike.y);
ctx.lineTo(spike.x+10,spike.y-20);
ctx.lineTo(spike.x+20,spike.y);
ctx.fill();
}

function drawPlayer(){
ctx.fillStyle="black";
ctx.fillRect(player.x,player.y,player.w,player.h);
}

function update(){
player.dy += gravity;

if(keys.left) player.dx = -5;
else if(keys.right) player.dx = 5;
else player.dx = 0;

player.x += player.dx;
player.y += player.dy;

player.grounded=false;

if(player.y + player.h > ground.y){
player.y = ground.y - player.h;
player.dy = 0;
player.grounded=true;
}

if(keys.jump && player.grounded){
player.dy = -15;
}

if(player.x < spike.x+20 &&
player.x+player.w > spike.x &&
player.y+player.h > spike.y-20){
reset();
}

if(player.y > canvas.height) reset();
}

function reset(){
player.x=100;
player.y=300;
player.dy=0;
}

function loop(){
ctx.clearRect(0,0,canvas.width,canvas.height);
drawBackground();
drawGround();
drawSpike();
drawPlayer();
update();
requestAnimationFrame(loop);
}

document.getElementById("left").ontouchstart=()=>keys.left=true;
document.getElementById("left").ontouchend=()=>keys.left=false;

document.getElementById("right").ontouchstart=()=>keys.right=true;
document.getElementById("right").ontouchend=()=>keys.right=false;

document.getElementById("jump").ontouchstart=()=>keys.jump=true;
document.getElementById("jump").ontouchend=()=>keys.jump=false;

loop();
</script>

</body>
</html>
